# Fallow-Earth

## Map Generation

This project includes a simple `MapGenerator` script found in `Assets/Scripts`.
It uses Unity's **Grid** and **Tilemap** systems to build a tile-based map at
runtime. The generator fills the ground layer with tiles and randomly places
trees. Each cell's passability is stored in a `bool[,]` array, accessible via
`IsPassable(x, y)`.

### Usage
1. Create a parent GameObject with a `Grid` component.
2. Add two child objects, each with `Tilemap` and `TilemapRenderer` components –
   one for ground and another for trees.
3. Attach `MapGenerator` to the parent and assign the Tilemaps and tile assets in
   the Inspector.
4. Configure map size and tree probability, then run the scene to generate
   the map.

## Colonist

The `Colonist` prefab is driven by the `Colonist` script found in `Assets/Scripts/Colonists`.
It requests tasks from a `TaskManager` in the scene and moves using a simple A* search over the map generated by `MapGenerator`.
Tasks are represented by the `Task` class and queued through `TaskManager`.

### Example
Two colonists are created automatically when the scene starts. If no tasks are available they will wander the map.
1. Add a `TaskManager` component to an empty GameObject in the scene (this is also done automatically by `ColonistBootstrap`).
2. Create a new GameObject and attach the `Colonist` script if you want additional colonists.
3. At runtime use `TaskManager.AddTask(new Task(targetPosition))` to send a colonist somewhere.

## Tree Chopping

A simple chopping tool is available via the `TreeChopController` script. When the game starts you can open the **Приказы** menu which contains a **Срубить** button. Toggle this and click or tap on any tree tile to designate it for chopping. When active, the button now animates by pressing inward so it's clear you can tap on trees. Free colonists will automatically receive tasks to move to the tree and remove it. Selected trees are tinted slightly brighter so you can easily see which ones you've marked.


Chopped trees now drop a `WoodLog` object at their position. Each log displays how much wood was gathered (between 30 and 50).

Colonists must physically collect these logs to build. Constructing a wall consumes **10** wood. When a frame is placed, a colonist will haul a nearby log to the site and spend time building the final wall.
Doors are built the same way and open automatically when colonists pass through.

## Building Menu

The `BuildMenuController` script creates a **Строительство** button. Pressing it opens a panel containing eight building buttons laid out in a 2x4 grid. The panel smoothly scales in and out when toggled so the interface feels more responsive.
Alongside wooden walls you can now place wooden doors that automatically open when colonists approach.
Clicking a door toggles a *hold open* mode so it stays open after colonists leave.

## Zone Menu

`ZoneMenuController` adds a **Зоны** button to the UI. Tapping it displays a 2x4 grid of zone buttons. The first entry is labeled **Склад** (warehouse) with seven additional placeholder buttons.

## Unified Bottom Left Menu

`BottomLeftMenuController` groups the **Приказы**, **Строительство** and **Зоны** buttons inside a single vertical panel. This matches RimWorld's bottom left layout and keeps all commands in one place.
All interface buttons now animate slightly when pressed thanks to the new `ButtonPressEffect` component, making taps feel more responsive on both desktop and mobile. Menu buttons stay tinted while their panels are open so you can see which menu is currently active.

## Mobile Camera Orientation

`CameraBootstrap` now keeps the main camera aligned with the current screen resolution. A small `CameraAutoFitter` component updates the camera whenever the device orientation or window size changes and the `CameraPanZoomController` component is added automatically if it is missing. This prevents stretching on wide or tall displays and works on both desktop and mobile devices.

## Camera Controls

The `CameraPanZoomController` script enables mobile-style controls. Swipe with one finger to move around and pinch with two fingers to zoom. The camera position is clamped to the map so it cannot be dragged outside the generated area. This component is now added automatically by `CameraBootstrap`.

For simple drag panning without zooming, use the `CameraDragController` script. Hold the left mouse button or touch the screen with one finger and move to pan the view, just like dragging a photo around.


## Area Selection

`AreaSelectionController` lets you drag out a rectangle after holding the left mouse button (or a finger on mobile) for a short delay. Once the delay passes, a translucent green box appears to show the area being selected. Releasing the button now creates a zone over any ground tiles inside the selection using a random dim color. Each cell in the zone also receives a small transparent overlay object so the designated area remains visible even after the selection box disappears. Non-passable tiles such as water or mountains are ignored when placing zones.

## Colonist Needs

Colonists gradually become hungry and tired over time. Hunger and fatigue both reduce movement speed and lower mood. These needs are visible on the colonist info card and update automatically each frame.

Colonists will seek out a constructed bed when their fatigue grows high. Resting in a bed slowly decreases fatigue over several seconds. Beds are built from the construction menu and cost ten wood, just like walls and doors.

## Weather

A new `WeatherSystem` randomly brings rain. When it rains the screen darkens slightly and colonists move slower. The current weather switches between clear and rainy after random intervals.
